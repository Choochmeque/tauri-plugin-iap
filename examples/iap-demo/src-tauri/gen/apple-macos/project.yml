# Generated by tauri-macos-xcode - https://github.com/Choochmeque/tauri-macos-xcode
name: iap-demo
options:
  bundleIdPrefix: com.tauri
  deploymentTarget:
    macOS: "13.0"
fileGroups: [../../src]
configs:
  debug: debug
  release: release
settingGroups:
  app:
    base:
      PRODUCT_NAME: iap-demo
      PRODUCT_BUNDLE_IDENTIFIER: com.tauri.dev
targets:
  iap-demo_macOS:
    type: application
    platform: macOS
    sources:
      - path: Assets.xcassets
      - path: iap-demo_macOS
    info:
      path: iap-demo_macOS/Info.plist
      properties:
        CFBundleExecutable: "$(EXECUTABLE_NAME)"
        CFBundleIdentifier: "$(PRODUCT_BUNDLE_IDENTIFIER)"
        CFBundleName: "$(PRODUCT_NAME)"
        CFBundlePackageType: APPL
        CFBundleShortVersionString: "$(MARKETING_VERSION)"
        CFBundleVersion: "$(CURRENT_PROJECT_VERSION)"
        LSMinimumSystemVersion: "$(MACOSX_DEPLOYMENT_TARGET)"
        NSHighResolutionCapable: true
        NSPrincipalClass: NSApplication
    entitlements:
      path: iap-demo_macOS/iap-demo_macOS.entitlements
    settings:
      base:
        ARCHS: [arm64, x86_64]
        VALID_ARCHS: [arm64, x86_64]
        CODE_SIGN_ALLOW_ENTITLEMENTS_MODIFICATION: YES
        MARKETING_VERSION: 0.1.0
        CURRENT_PROJECT_VERSION: 0.1.0
      groups: [app]
    dependencies:
      - sdk: AppKit.framework
      - sdk: CoreGraphics.framework
      - sdk: Metal.framework
      - sdk: MetalKit.framework
      - sdk: QuartzCore.framework
      - sdk: Security.framework
      - sdk: WebKit.framework
    postCompileScripts:
      - script: ${PROJECT_DIR}/scripts/build-rust.sh ${CONFIGURATION} "${ARCHS}"
        name: Build and Copy Rust Binary
        basedOnDependencyAnalysis: false

schemes:
  iap-demo_macOS:
    build:
      targets:
        iap-demo_macOS: all
    run:
      config: debug
    profile:
      config: release
    analyze:
      config: debug
    archive:
      config: release
